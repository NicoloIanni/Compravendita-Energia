@startuml
left to right direction
skinparam packageStyle rectangle

actor Admin
actor Producer
actor Consumer

rectangle "Sistema Compravendita Energia (T+1)" {

  usecase "Login / Ottieni JWT" as UC_Login

  usecase "Creare Producer" as UC_CreateProducer
  usecase "Aggiornare capacità\nper fascia oraria" as UC_UpdateCapacity
  usecase "Aggiornare costo kWh\nper fascia oraria" as UC_UpdatePrice
  usecase "Verificare richieste\nper domani (filtri orari)\n+ % occupazione" as UC_ViewRequests
  usecase "Accettare richieste\n(con taglio proporzionale)" as UC_AcceptCut
  usecase "Statistiche vendite\n(min/max/media/dev std)\n+ JSON/grafico" as UC_Stats
  usecase "Calcolare guadagni\n(intervallo)" as UC_Earnings

  usecase "Creare Consumer\n(con credito iniziale)" as UC_CreateConsumer
  usecase "Prenotare slot T+1\n(min 0.1 kWh)" as UC_Book
  usecase "Modificare slot\n(anche quantità=0)" as UC_ModifyCancel
  usecase "Vedere acquisti\n(filtri: producer, fonte,\nintervallo)" as UC_ListPurchases
  usecase "Calcolare impronta CO2\n(intervallo)" as UC_CO2
}

Admin --> UC_Login
Producer --> UC_Login
Consumer --> UC_Login

Admin --> UC_CreateProducer
Admin --> UC_CreateConsumer

Producer --> UC_UpdateCapacity
Producer --> UC_UpdatePrice
Producer --> UC_ViewRequests
Producer --> UC_AcceptCut
Producer --> UC_Stats
Producer --> UC_Earnings

Consumer --> UC_Book
Consumer --> UC_ModifyCancel
Consumer --> UC_ListPurchases
Consumer --> UC_CO2

@enduml
